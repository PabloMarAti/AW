var connection = require("Conexion");

module.exports = Login;


function Login(usuario, password, callback){
    conexion = connection.getConexion();
    
     if(callback === undefined){
        callback = function(){};
    } else{
        conexion.connect(function(err){
            if(err){
                callback(err);
            } else{
                var sql = "select Nombre_Usuario, Password " + 
                          "from usuario " + 
                          "where usuario.Nombre_Usuario = '" + usuario + "' and Password = '" + password + "';";
                conexion.query(sql, function(err, filas){
                    if(err){
                        callback(err);
                    } else{
                        if(filas.length !== 0){
                            callback(null, "Logeado");
                        } else{
                            callback(null, "Usuario/Contrase√±a mal introducida");
                        }
                    }
                    conexion.end();
                });
            }
        });
    }
}